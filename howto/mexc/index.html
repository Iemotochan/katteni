<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>RYOã‚³ã‚¤ãƒ³ BitTradeè³¼å…¥ã‚¬ã‚¤ãƒ‰ | å®Œå…¨å¯¾å¿œç‰ˆ</title>
    
    <!-- ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰æœ€é©åŒ– -->
    <link rel="preload" href="audio/oshiete.mp3" as="audio">
    <link rel="preload" href="audio/bgm.mp3" as="audio">
    <link rel="preload" href="audio/koban.mp3" as="audio">
    <link rel="preload" href="image/ryokosensei.png" as="image">
    <link rel="preload" href="image/zentasensei.png" as="image">
    
    <!-- CSSèª­ã¿è¾¼ã¿ -->
    <link rel="stylesheet" href="main.css">
    
    <!-- PWAå¯¾å¿œ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    
    <!-- ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ã•è¨ˆç®—ç”¨CSSå¤‰æ•° -->
    <style>
        :root {
            --vh: 1vh;
            --safe-area-inset-top: env(safe-area-inset-top, 0);
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0);
            --safe-area-inset-left: env(safe-area-inset-left, 0);
            --safe-area-inset-right: env(safe-area-inset-right, 0);
            --available-height: calc(var(--vh) * 100 - var(--safe-area-inset-top) - var(--safe-area-inset-bottom));
        }
    </style>
</head>
<body>
    <!-- å‹•çš„ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ã•è¨ˆç®—ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
        // æœ€å„ªå…ˆã§ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ã•ã‚’è¨­å®š
        function setVH() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
            
            // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±ã‚’ãƒ­ã‚°å‡ºåŠ›
            console.log(`ğŸ“± ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±:
- ç”»é¢ã‚µã‚¤ã‚º: ${window.innerWidth} Ã— ${window.innerHeight}
- ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ: ${window.innerWidth} Ã— ${window.innerHeight}
- ãƒ‡ãƒã‚¤ã‚¹æ¯”: ${window.devicePixelRatio}
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: ${navigator.userAgent.includes('iPhone') ? 'iPhone' : navigator.userAgent.includes('Android') ? 'Android' : 'ãã®ä»–'}`);
        }
        
        // åˆæœŸè¨­å®š
        setVH();
        
        // ãƒªã‚µã‚¤ã‚ºæ™‚ã®å†è¨ˆç®—ï¼ˆãƒ‡ãƒã‚¦ãƒ³ã‚¹ä»˜ãï¼‰
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(setVH, 100);
        });
        
        // ã‚ªãƒªã‚¨ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å¤‰æ›´æ™‚
        window.addEventListener('orientationchange', () => {
            setTimeout(setVH, 200);
        });
    </script>

    <!-- ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”¨ã‚­ãƒ£ãƒ³ãƒã‚¹ -->
    <canvas id="starfield"></canvas>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒŠ -->
    <div class="app-container">
        <!-- èƒŒæ™¯ãƒ¬ã‚¤ãƒ¤ãƒ¼ -->
        <div class="background-layer">
            <img class="background-img" src="image/guide.jpg" alt="ã‚¬ã‚¤ãƒ‰èƒŒæ™¯" id="backgroundImg">
        </div>

        <!-- ä¸Šéƒ¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆé©å¿œå‹ï¼‰ -->
        <nav class="top-nav">
            <button class="nav-btn" id="backBtn" disabled>
                <span class="nav-icon">â†</span>
                <span class="nav-text">æˆ»ã‚‹</span>
            </button>
            <button class="nav-btn" id="skipBtn">
                <span class="nav-icon">â†’</span>
                <span class="nav-text">æ¬¡ã¸</span>
            </button>
        </nav>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ï¼ˆãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«ï¼‰ -->
        <main class="content-area">
            <!-- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆè¡¨ç¤ºï¼ˆé©å¿œå‹ï¼‰ -->
            <div class="screenshot-container">
                <img class="screenshot-img show" src="image/guide.jpg" alt="ã‚¬ã‚¤ãƒ‰ç”»åƒ" id="screenshotImg">
                <div class="screenshot-overlay"></div>
            </div>
        </main>

        <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢ï¼ˆå®Œå…¨é©å¿œå‹ï¼‰ -->
        <section class="message-area">
            <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼ˆã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ï¼‰ -->
            <div class="character-container">
                <img class="character-img" src="image/ryokosensei.png" alt="ä¸¡å­å…ˆç”Ÿ" id="characterImg">
            </div>

            <!-- å¹ãå‡ºã—ï¼ˆãƒ•ãƒ¬ã‚­ã‚·ãƒ–ãƒ«ï¼‰ -->
            <div class="speech-bubble">
                <div class="bubble-arrow"></div>
                <div class="bubble-content">
                    <p class="bubble-text" id="bubbleText">ã“ã‚“ã«ã¡ã¯ï¼ä¸¡å­ã§ã™âœ¨<br>ç”»é¢ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ç¶šè¡Œ</p>
                </div>
                <div class="tap-indicator" id="tapIndicator">
                    <span class="tap-text">ã‚¿ãƒƒãƒ—</span>
                    <div class="tap-pulse"></div>
                </div>
            </div>
        </section>

        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‚¨ãƒªã‚¢ï¼ˆé©å¿œå‹ï¼‰ -->
        <div class="progress-area">
            <div class="progress-info">
                <span id="progressCurrent">1</span> / <span id="progressTotal">10</span>
            </div>
            <div class="progress-bar-bg">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
    </div>

    <!-- éŸ³å£°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆå®Œå…¨ã‚»ãƒ³ã‚¿ãƒªãƒ³ã‚°ï¼‰ -->
    <div class="audio-dialog" id="audioDialog">
        <div class="dialog-overlay"></div>
        <div class="dialog-content">
            <div class="audio-icon">ğŸµ</div>
            <h3>éŸ³å£°ã‚’å†ç”Ÿã—ã¾ã™ã‹ï¼Ÿ</h3>
            <p>ã‚ˆã‚Šè‰¯ã„ä½“é¨“ã®ãŸã‚ã«éŸ³å£°ã‚’ã‚ªãƒ³ã«ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™</p>
            <div class="dialog-buttons">
                <button class="dialog-btn primary" id="audioOnBtn">éŸ³å£°ON</button>
                <button class="dialog-btn secondary" id="audioOffBtn">éŸ³å£°OFF</button>
            </div>
        </div>
    </div>

    <!-- éŸ³å£°è¦ç´  -->
    <audio id="voicePlayer" preload="auto" loop></audio>
    <audio id="bgmPlayer" src="audio/bgm.mp3" preload="auto" loop></audio>

    <!-- JavaScriptèª­ã¿è¾¼ã¿ -->
    <script src="starfield-effect.js"></script>
    <script src="main.js"></script>
    <script src="sound-novel.js"></script>
</body>
</html>
